"use strict";(self.webpackChunksocial_labs=self.webpackChunksocial_labs||[]).push([[290],{8172:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"type":"mdx","permalink":"/docs/en/articles/linter","source":"@site/src/pages/articles/linter.md","title":"Linter para TypeScript","description":"Neste tutorial, voc\xea ir\xe1 ver como aplicar na pr\xe1tica um linter para aplica\xe7\xf5es typescript, o typescript-lint. Para isso, iremos aplicar o linter na codebase do projeto Zero \xd3bito.","frontMatter":{},"unlisted":false}');var r=s(4848),t=s(8453);const o={},a="Linter para TypeScript",l={},c=[{value:"Setup",id:"setup",level:2},{value:"Passos",id:"passos",level:2},{value:"1. Checkout para o Commit mais recente do Zero Obito sem ESLint",id:"1-checkout-para-o-commit-mais-recente-do-zero-obito-sem-eslint",level:3},{value:"2. Instala\xe7\xe3o das Ferramentas Necess\xe1rias",id:"2-instala\xe7\xe3o-das-ferramentas-necess\xe1rias",level:3},{value:"3. Configura\xe7\xe3o do Linter (<code>eslint.config.mjs</code>)",id:"3-configura\xe7\xe3o-do-linter-eslintconfigmjs",level:3},{value:"4. Defini\xe7\xe3o de Regras Customizadas",id:"4-defini\xe7\xe3o-de-regras-customizadas",level:3},{value:"Exemplo de Configura\xe7\xe3o",id:"exemplo-de-configura\xe7\xe3o",level:4},{value:"5. Executando o ESLint",id:"5-executando-o-eslint",level:3},{value:"Plugins e Lint para React",id:"plugins-e-lint-para-react",level:2},{value:"1. Instala\xe7\xe3o do Plugin",id:"1-instala\xe7\xe3o-do-plugin",level:3},{value:"2. Configura\xe7\xe3o do ESLint com React",id:"2-configura\xe7\xe3o-do-eslint-com-react",level:3},{value:"Sobre o Prettier",id:"sobre-o-prettier",level:2},{value:"1. Criando Arquivo de Configura\xe7\xe3o <code>.prettierrc.json</code>",id:"1-criando-arquivo-de-configura\xe7\xe3o-prettierrcjson",level:3},{value:"2. Instalar a Extens\xe3o do Prettier no VSCode",id:"2-instalar-a-extens\xe3o-do-prettier-no-vscode",level:3},{value:"\ud83d\udccc <strong>Repo</strong>",id:"-repo",level:2},{value:"\ud83d\udccc <strong>Passos Extras</strong>",id:"-passos-extras",level:2},{value:"Configura\xe7\xf5es Extendidas",id:"configura\xe7\xf5es-extendidas",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"linter-para-typescript",children:"Linter para TypeScript"})}),"\n",(0,r.jsx)(n.p,{children:"Neste tutorial, voc\xea ir\xe1 ver como aplicar na pr\xe1tica um linter para aplica\xe7\xf5es typescript, o typescript-lint. Para isso, iremos aplicar o linter na codebase do projeto Zero \xd3bito."}),"\n",(0,r.jsxs)(n.p,{children:["O ",(0,r.jsx)(n.strong,{children:"typescript-lint"})," \xe9 um adaptador de ESLint e Prettier para TypeScript."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.p,{children:"Fa\xe7a um clone do projeto localmente:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"git clone https://github.com/SocialSoftwareLivingLab/zerobito.git\n"})}),"\n",(0,r.jsx)(n.h2,{id:"passos",children:"Passos"}),"\n",(0,r.jsx)(n.h3,{id:"1-checkout-para-o-commit-mais-recente-do-zero-obito-sem-eslint",children:"1. Checkout para o Commit mais recente do Zero Obito sem ESLint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"git checkout a4496ff\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-instala\xe7\xe3o-das-ferramentas-necess\xe1rias",children:"2. Instala\xe7\xe3o das Ferramentas Necess\xe1rias"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"npm install --save-dev eslint-config-prettier eslint @eslint/js typescript typescript-eslint\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"3-configura\xe7\xe3o-do-linter-eslintconfigmjs",children:["3. Configura\xe7\xe3o do Linter (",(0,r.jsx)(n.code,{children:"eslint.config.mjs"}),")"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import eslint from '@eslint/js';\nimport tseslint from 'typescript-eslint';\nimport prettierConfig from 'eslint-config-prettier';\n\nexport default tseslint.config(\n    // Regras recomendadas para TypeScript\n    eslint.configs.recommended,\n    tseslint.configs.strictTypeChecked,\n    tseslint.configs.stylisticTypeChecked,\n    \n    // Indica\xe7\xe3o do arquivo `tsconfig`\n    {\n        languageOptions: {\n            // define vari\xe1veis globais do browser, para o erro de vari\xe1vel nao   \n            // definida nao ser apontado para as apis do browser\n            globals: {\n                ...globals.browser,\n            },\n            // localizacao do tsconfig\n            parserOptions: {\n                projectService: true,\n                tsconfigRootDir: import.meta.dirname,\n            },\n        },\n    },\n\n    // Regras personalizadas\n    {\n        rules: {\n            nomeDaRegra: 'op\xe7\xe3o'\n        }\n    },\n\n    // Desabilita lint de TS em arquivos JS, mantendo regras recomendadas para JS\n    {\n        files: ['**/*.js'],\n        extends: [\n            eslint.configs.recommended,\n            tseslint.configs.disableTypeChecked\n        ],\n    },\n\n    // Importa\xe7\xe3o de regras que evitam conflitos com Prettier (deve ser a \xfaltima para prioridade m\xe1xima)\n    prettierConfig\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-defini\xe7\xe3o-de-regras-customizadas",children:"4. Defini\xe7\xe3o de Regras Customizadas"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dentro da op\xe7\xe3o ",(0,r.jsx)(n.code,{children:"tseslint.config()"}),", definimos um objeto ",(0,r.jsx)(n.code,{children:"rules"}),", onde:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"off"}),": Desabilita a regra."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"warn"}),": Exibe um aviso sem gerar erro cr\xedtico."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Emite erro cr\xedtico."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Podemos ter m\xfaltiplos objetos ",(0,r.jsx)(n.code,{children:"rules"}),", que s\xe3o mesclados automaticamente. Em caso de conflito, a \xfaltima defini\xe7\xe3o prevalece."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"exemplo-de-configura\xe7\xe3o",children:"Exemplo de Configura\xe7\xe3o"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import eslint from '@eslint/js';\nimport tseslint from 'typescript-eslint';\nimport prettierConfig from 'eslint-config-prettier';\n\nexport default tseslint.config(\n    eslint.configs.recommended,\n    tseslint.configs.strictTypeChecked,\n    tseslint.configs.stylisticTypeChecked,\n    {\n        languageOptions: {\n            globals: {\n                ...globals.browser,\n            },\n            parserOptions: {\n                projectService: true,\n                tsconfigRootDir: import.meta.dirname,\n            },\n        },\n    },\n    {\n        rules: {\n            \"@typescript-eslint/adjacent-overload-signatures\": \"warn\"\n        }\n    },\n    {\n        files: ['**/*.js'],\n        extends: [\n            eslint.configs.recommended,\n            tseslint.configs.disableTypeChecked\n        ],\n    },\n    prettierConfig\n);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Refer\xeancias de regras:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://typescript-eslint.io/rules/",children:"Regras espec\xedficas do TypeScript"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://eslint.org/docs/latest/rules/",children:"Regras espec\xedficas do JavaScript"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-executando-o-eslint",children:"5. Executando o ESLint"}),"\n",(0,r.jsxs)(n.p,{children:["Rodamos o linter apenas com as regras recomendadas pela comunidade, resultando em ",(0,r.jsx)(n.strong,{children:"295 erros"})," (principalmente relacionados ao uso do tipo ",(0,r.jsx)(n.code,{children:"any"})," e falta de tratamento de erros)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"npx eslint .\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"plugins-e-lint-para-react",children:"Plugins e Lint para React"}),"\n",(0,r.jsxs)(n.p,{children:["Podemos usar ",(0,r.jsx)(n.strong,{children:"plugins"})," para compartilhar regras de lint entre desenvolvedores. Um caso importante \xe9 o uso de regras espec\xedficas para React, como ",(0,r.jsx)(n.code,{children:"eslint-plugin-react"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"1-instala\xe7\xe3o-do-plugin",children:"1. Instala\xe7\xe3o do Plugin"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"npm install eslint-plugin-react --save-dev\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-configura\xe7\xe3o-do-eslint-com-react",children:"2. Configura\xe7\xe3o do ESLint com React"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import eslint from '@eslint/js';\nimport tseslint, { plugin } from 'typescript-eslint';\nimport prettierConfig from 'eslint-config-prettier';\nimport reactPlugin from 'eslint-plugin-react';\n\nexport default tseslint.config(\n    eslint.configs.recommended,\n    reactPlugin.configs.flat.recommended,\n    tseslint.configs.strictTypeChecked,\n    tseslint.configs.stylisticTypeChecked,\n    {\n        languageOptions: {\n            globals: {\n                ...globals.browser,\n            },\n            parserOptions: {\n                projectService: true,\n                tsconfigRootDir: import.meta.dirname,\n            },\n        },\n    },\n    {\n        rules: {\n            \"@typescript-eslint/prefer-promise-reject-errors\": \"off\"\n        },\n    },\n    {\n        files: ['**/*.js'],\n        extends: [\n            eslint.configs.recommended,\n            tseslint.configs.disableTypeChecked\n        ],\n    },\n    prettierConfig\n);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sobre-o-prettier",children:"Sobre o Prettier"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Prettier"})," \xe9 um formatador de c\xf3digo que ",(0,r.jsx)(n.strong,{children:"aprimora a estiliza\xe7\xe3o do c\xf3digo"}),", sem alterar regras de lint."]}),"\n",(0,r.jsxs)(n.li,{children:["\xc9 ",(0,r.jsx)(n.strong,{children:"mais r\xe1pido que o ESLint"})," para verifica\xe7\xe3o de padr\xf5es, pois n\xe3o faz an\xe1lise sint\xe1tica."]}),"\n",(0,r.jsxs)(n.li,{children:["Para evitar conflitos entre ESLint e Prettier, desabilitamos regras conflitantes no ESLint atrav\xe9s de ",(0,r.jsx)(n.code,{children:"prettierConfig"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Para garantir ",(0,r.jsx)(n.strong,{children:"formata\xe7\xe3o consistente"}),", todos os desenvolvedores do time devem ter as mesmas configura\xe7\xf5es."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-criando-arquivo-de-configura\xe7\xe3o-prettierrcjson",children:["1. Criando Arquivo de Configura\xe7\xe3o ",(0,r.jsx)(n.code,{children:".prettierrc.json"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "trailingComma": "es5",\n  "tabWidth": 4,\n  "semi": false,\n  "singleQuote": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-instalar-a-extens\xe3o-do-prettier-no-vscode",children:"2. Instalar a Extens\xe3o do Prettier no VSCode"}),"\n",(0,r.jsx)(n.p,{children:"Para manter o c\xf3digo formatado automaticamente."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"-repo",children:["\ud83d\udccc ",(0,r.jsx)(n.strong,{children:"Repo"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/caiomelloni/zerobito/tree/applies-eslint",children:"Exemplo final"})}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"-passos-extras",children:["\ud83d\udccc ",(0,r.jsx)(n.strong,{children:"Passos Extras"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Instalar a extens\xe3o ",(0,r.jsx)(n.strong,{children:"ESLint da Microsoft"})," no VSCode para exibir os erros diretamente no editor."]}),"\n",(0,r.jsxs)(n.li,{children:["Para exibir todos os erros no editor, rodar uma task espec\xedfica:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"ctrl + shift + p > Run Task > eslint: lint whole folder\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Configurar a op\xe7\xe3o ",(0,r.jsx)(n.code,{children:"strictNullChecks"})," como ",(0,r.jsx)(n.code,{children:"true"})," no ",(0,r.jsx)(n.code,{children:"tsconfig.json"}),", garantindo que ",(0,r.jsx)(n.code,{children:"null"})," e ",(0,r.jsx)(n.code,{children:"undefined"})," sejam tratados corretamente pelo TypeScript."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configura\xe7\xf5es-extendidas",children:"Configura\xe7\xf5es Extendidas"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/src/configs/recommended-type-checked.ts",children:"tseslint.configs.recommendedTypeChecked"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/src/configs/strict-type-checked.ts",children:"tseslint.configs.strictTypeChecked"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/src/configs/stylistic-type-checked.ts",children:"tseslint.configs.stylisticTypeChecked"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);